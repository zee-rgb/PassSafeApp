<div class="container mx-auto px-4 py-8">
  <div class="bg-white rounded-lg shadow-md p-6">
      <div class="mb-6">
        <h1 class="text-2xl font-bold text-gray-900 mb-2"><%= @entry.name %></h1>
        <p class="text-gray-500 text-sm">
          Created: <%= @entry.created_at.strftime("%B %d, %Y at %I:%M %p") %>
          <% if @entry.updated_at != @entry.created_at %>
            | Updated: <%= @entry.updated_at.strftime("%B %d, %Y at %I:%M %p") %>
          <% end %>
        </p>
      </div>

      <div class="space-y-6">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Website</label>
          <div class="flex items-center gap-3">
            <p class="text-gray-900 truncate"><%= @entry.url %></p>
            <%= link_to "Open", @entry.url, target: "_blank", class: "text-sm text-indigo-600 hover:text-indigo-700 font-medium" %>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Username</label>
          <div id="username-container" class="flex items-center gap-3">
            <p class="text-sm text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded">••••••••</p>
            <button id="reveal-username-btn" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm border border-gray-300 hover:bg-gray-50">Reveal</button>
            <button id="hide-username-btn" style="display: none;" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm border border-gray-300 hover:bg-gray-50">Hide</button>
          </div>
        </div>

        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
          <div id="password-container" class="flex items-center gap-3">
            <p class="text-sm text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded">••••••••</p>
            <button id="reveal-password-btn" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm border border-gray-300 hover:bg-gray-50">Reveal</button>
            <button id="hide-password-btn" style="display: none;" class="rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm border border-gray-300 hover:bg-gray-50">Hide</button>
          </div>
        </div>

        <script>
          document.addEventListener('DOMContentLoaded', function() {
            const csrfToken = document.querySelector('meta[name="csrf-token"]').content;
            const entryId = <%= @entry.id %>;

            // Username reveal/hide
            document.getElementById('reveal-username-btn').addEventListener('click', function() {
              fetch(`/en/entries/${entryId}/reveal_username`, {
                method: 'POST',
                headers: {
                  'X-CSRF-Token': csrfToken,
                  'Content-Type': 'application/json',
                  'Accept': 'application/json'
                }
              })
              .then(response => response.json())
              .then(data => {
                document.querySelector('#username-container p').textContent = data.value;
                document.getElementById('reveal-username-btn').style.display = 'none';
                document.getElementById('hide-username-btn').style.display = 'inline-block';
              });
            });

            document.getElementById('hide-username-btn').addEventListener('click', function() {
              fetch(`/en/entries/${entryId}/mask_username`, {
                method: 'POST',
                headers: {
                  'X-CSRF-Token': csrfToken,
                  'Content-Type': 'application/json',
                  'Accept': 'application/json'
                }
              })
              .then(response => response.json())
              .then(data => {
                document.querySelector('#username-container p').textContent = '••••••••';
                document.getElementById('reveal-username-btn').style.display = 'inline-block';
                document.getElementById('hide-username-btn').style.display = 'none';
              });
            });

            // Password reveal/hide
            document.getElementById('reveal-password-btn').addEventListener('click', function() {
              fetch(`/en/entries/${entryId}/reveal_password`, {
                method: 'POST',
                headers: {
                  'X-CSRF-Token': csrfToken,
                  'Content-Type': 'application/json',
                  'Accept': 'application/json'
                }
              })
              .then(response => response.json())
              .then(data => {
                document.querySelector('#password-container p').textContent = data.value;
                document.getElementById('reveal-password-btn').style.display = 'none';
                document.getElementById('hide-password-btn').style.display = 'inline-block';
              });
            });

            document.getElementById('hide-password-btn').addEventListener('click', function() {
              fetch(`/en/entries/${entryId}/mask_password`, {
                method: 'POST',
                headers: {
                  'X-CSRF-Token': csrfToken,
                  'Content-Type': 'application/json',
                  'Accept': 'application/json'
                }
              })
              .then(response => response.json())
              .then(data => {
                document.querySelector('#password-container p').textContent = '••••••••';
                document.getElementById('reveal-password-btn').style.display = 'inline-block';
                document.getElementById('hide-password-btn').style.display = 'none';
              });
            });
          });
        </script>
      </div>

      <div class="flex items-center justify-between mt-8">
        <div class="flex gap-3">
          <%= link_to "Edit", edit_entry_path(@entry), class: "rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-700" %>
          <%= link_to "Back", entries_path, class: "rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-900 shadow-sm border border-gray-300 hover:bg-gray-50" %>
        </div>
        <div>
          <%= link_to "Delete", confirm_delete_entry_path(@entry),
              class: "rounded-md bg-red-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-700" %>
        </div>
      </div>

  </div>
</div>
